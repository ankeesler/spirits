{
  "openapi": "3.0.0",
  "info": {
    "title": "spirits",
    "version": "0.0.1",
    "description": "spirits is a turn-based battle royale game"
  },
  "servers": [
    {
      "url": "https://oh-great-spirits.herokuapp.com",
      "description": "The hosted spirits gameserver"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "description": "Retrieve the OpenAPI specification currently served",
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Object conforming to the OpenAPI standard"
                }
              }
            }
          }
        }
      }
    },
    "/sessions": {
      "parameters": [],
      "post": {
        "description": "Create a Session",
        "operationId": "createSession",
        "requestBody": {
          "description": "Session to create",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Session"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Session create",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions.write"
            ]
          }
        ],
        "tags": [
          "Session"
        ]
      },
      "get": {
        "description": "List Sessions",
        "operationId": "listSessions",
        "responses": {
          "200": {
            "description": "Successful Sessions list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions.write",
              "spirits:sessions.read"
            ]
          }
        ],
        "tags": [
          "Session"
        ]
      }
    },
    "/sessions/{sessionName}": {
      "parameters": [
        {
          "name": "sessionName",
          "in": "path",
          "description": "Session name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Session name",
            "minLength": 1
          }
        }
      ],
      "put": {
        "description": "Update Session",
        "operationId": "updateSession",
        "requestBody": {
          "description": "Session to update",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Session"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Session update",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions.write"
            ]
          }
        ],
        "tags": [
          "Session"
        ]
      },
      "get": {
        "description": "Get Session",
        "operationId": "getSession",
        "responses": {
          "200": {
            "description": "Successful Session get",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions.write",
              "spirits:sessions.read"
            ]
          }
        ],
        "tags": [
          "Session"
        ]
      },
      "delete": {
        "description": "Watch Session",
        "operationId": "deleteSession",
        "responses": {
          "200": {
            "description": "Successful Session delete",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions.write"
            ]
          }
        ],
        "tags": [
          "Session"
        ]
      }
    },
    "/sessions/{sessionName}/teams": {
      "parameters": [
        {
          "name": "sessionName",
          "in": "path",
          "description": "Team name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Team name",
            "minLength": 1
          }
        }
      ],
      "post": {
        "description": "Create a Team",
        "operationId": "createSessionTeam",
        "requestBody": {
          "description": "Team to create",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Team"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Team create",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Team"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:teams.write"
            ]
          }
        ],
        "tags": [
          "SessionTeam"
        ]
      },
      "get": {
        "description": "List Teams",
        "operationId": "listSessionTeams",
        "responses": {
          "200": {
            "description": "Successful Teams list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Team"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:teams.write",
              "spirits:sessions:teams.read"
            ]
          }
        ],
        "tags": [
          "SessionTeam"
        ]
      }
    },
    "/sessions/{sessionName}/teams/{teamName}": {
      "parameters": [
        {
          "name": "sessionName",
          "in": "path",
          "description": "Team name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Team name",
            "minLength": 1
          }
        },
        {
          "name": "teamName",
          "in": "path",
          "description": "Team name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Team name",
            "minLength": 1
          }
        }
      ],
      "put": {
        "description": "Update Team",
        "operationId": "updateSessionTeam",
        "requestBody": {
          "description": "Team to update",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Team"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Team update",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Team"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:teams.write"
            ]
          }
        ],
        "tags": [
          "SessionTeam"
        ]
      },
      "get": {
        "description": "Get Team",
        "operationId": "getSessionTeam",
        "responses": {
          "200": {
            "description": "Successful Team get",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Team"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:teams.write",
              "spirits:sessions:teams.read"
            ]
          }
        ],
        "tags": [
          "SessionTeam"
        ]
      },
      "delete": {
        "description": "Watch Team",
        "operationId": "deleteSessionTeam",
        "responses": {
          "200": {
            "description": "Successful Team delete",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Team"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:teams.write"
            ]
          }
        ],
        "tags": [
          "SessionTeam"
        ]
      }
    },
    "/sessions/{sessionName}/teams/{teamName}/spirits": {
      "parameters": [
        {
          "name": "sessionName",
          "in": "path",
          "description": "Spirit name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Spirit name",
            "minLength": 1
          }
        },
        {
          "name": "teamName",
          "in": "path",
          "description": "Spirit name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Spirit name",
            "minLength": 1
          }
        }
      ],
      "post": {
        "description": "Create a Spirit",
        "operationId": "createSessionTeamSpirit",
        "requestBody": {
          "description": "Spirit to create",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spirit"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Spirit create",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spirit"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:teams:spirits.write"
            ]
          }
        ],
        "tags": [
          "SessionTeamSpirit"
        ]
      },
      "get": {
        "description": "List Spirits",
        "operationId": "listSessionTeamSpirits",
        "responses": {
          "200": {
            "description": "Successful Spirits list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spirit"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:teams:spirits.write",
              "spirits:sessions:teams:spirits.read"
            ]
          }
        ],
        "tags": [
          "SessionTeamSpirit"
        ]
      }
    },
    "/sessions/{sessionName}/teams/{teamName}/spirits/{spiritName}": {
      "parameters": [
        {
          "name": "sessionName",
          "in": "path",
          "description": "Spirit name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Spirit name",
            "minLength": 1
          }
        },
        {
          "name": "teamName",
          "in": "path",
          "description": "Spirit name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Spirit name",
            "minLength": 1
          }
        },
        {
          "name": "spiritName",
          "in": "path",
          "description": "Spirit name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Spirit name",
            "minLength": 1
          }
        }
      ],
      "put": {
        "description": "Update Spirit",
        "operationId": "updateSessionTeamSpirit",
        "requestBody": {
          "description": "Spirit to update",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Spirit"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Spirit update",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spirit"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:teams:spirits.write"
            ]
          }
        ],
        "tags": [
          "SessionTeamSpirit"
        ]
      },
      "get": {
        "description": "Get Spirit",
        "operationId": "getSessionTeamSpirit",
        "responses": {
          "200": {
            "description": "Successful Spirit get",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spirit"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:teams:spirits.write",
              "spirits:sessions:teams:spirits.read"
            ]
          }
        ],
        "tags": [
          "SessionTeamSpirit"
        ]
      },
      "delete": {
        "description": "Watch Spirit",
        "operationId": "deleteSessionTeamSpirit",
        "responses": {
          "200": {
            "description": "Successful Spirit delete",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spirit"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:teams:spirits.write"
            ]
          }
        ],
        "tags": [
          "SessionTeamSpirit"
        ]
      }
    },
    "/sessions/{sessionName}/battles": {
      "parameters": [
        {
          "name": "sessionName",
          "in": "path",
          "description": "Battle name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Battle name",
            "minLength": 1
          }
        }
      ],
      "post": {
        "description": "Create a Battle",
        "operationId": "createSessionBattle",
        "requestBody": {
          "description": "Battle to create",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Battle"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Battle create",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Battle"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:battles.write"
            ]
          }
        ],
        "tags": [
          "SessionBattle"
        ]
      },
      "get": {
        "description": "List Battles",
        "operationId": "listSessionBattles",
        "responses": {
          "200": {
            "description": "Successful Battles list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Battle"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:battles.write",
              "spirits:sessions:battles.read"
            ]
          }
        ],
        "tags": [
          "SessionBattle"
        ]
      }
    },
    "/sessions/{sessionName}/battles/{battleName}": {
      "parameters": [
        {
          "name": "sessionName",
          "in": "path",
          "description": "Battle name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Battle name",
            "minLength": 1
          }
        },
        {
          "name": "battleName",
          "in": "path",
          "description": "Battle name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Battle name",
            "minLength": 1
          }
        }
      ],
      "get": {
        "description": "Get Battle",
        "operationId": "getSessionBattle",
        "responses": {
          "200": {
            "description": "Successful Battle get",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Battle"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:battles.write",
              "spirits:sessions:battles.read"
            ]
          }
        ],
        "tags": [
          "SessionBattle"
        ]
      },
      "delete": {
        "description": "Watch Battle",
        "operationId": "deleteSessionBattle",
        "responses": {
          "200": {
            "description": "Successful Battle delete",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Battle"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:battles.write"
            ]
          }
        ],
        "tags": [
          "SessionBattle"
        ]
      }
    },
    "/sessions/{sessionName}/battles/{battleName}/spirits": {
      "parameters": [
        {
          "name": "sessionName",
          "in": "path",
          "description": "Spirit name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Spirit name",
            "minLength": 1
          }
        },
        {
          "name": "battleName",
          "in": "path",
          "description": "Spirit name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Spirit name",
            "minLength": 1
          }
        }
      ],
      "get": {
        "description": "List Spirits",
        "operationId": "listSessionBattleSpirits",
        "responses": {
          "200": {
            "description": "Successful Spirits list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spirit"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:battles:spirits.write",
              "spirits:sessions:battles:spirits.read"
            ]
          }
        ],
        "tags": [
          "SessionBattleSpirit"
        ]
      }
    },
    "/sessions/{sessionName}/battles/{battleName}/spirits/{spiritName}": {
      "parameters": [
        {
          "name": "sessionName",
          "in": "path",
          "description": "Spirit name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Spirit name",
            "minLength": 1
          }
        },
        {
          "name": "battleName",
          "in": "path",
          "description": "Spirit name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Spirit name",
            "minLength": 1
          }
        },
        {
          "name": "spiritName",
          "in": "path",
          "description": "Spirit name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Spirit name",
            "minLength": 1
          }
        }
      ],
      "get": {
        "description": "Get Spirit",
        "operationId": "getSessionBattleSpirit",
        "responses": {
          "200": {
            "description": "Successful Spirit get",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Spirit"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:battles:spirits.write",
              "spirits:sessions:battles:spirits.read"
            ]
          }
        ],
        "tags": [
          "SessionBattleSpirit"
        ]
      }
    },
    "/sessions/{sessionName}/battles/{battleName}/spirits/{spiritName}/actions": {
      "parameters": [
        {
          "name": "sessionName",
          "in": "path",
          "description": "Action name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Action name",
            "minLength": 1
          }
        },
        {
          "name": "battleName",
          "in": "path",
          "description": "Action name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Action name",
            "minLength": 1
          }
        },
        {
          "name": "spiritName",
          "in": "path",
          "description": "Action name",
          "required": true,
          "schema": {
            "type": "string",
            "description": "Action name",
            "minLength": 1
          }
        }
      ],
      "post": {
        "description": "Create a Action",
        "operationId": "createSessionBattleSpiritAction",
        "requestBody": {
          "description": "Action to create",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Action"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Action create",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Action"
                }
              }
            }
          }
        },
        "security": [
          {
            "oidc": [
              "spirits:sessions:battles:spirits:actions.write"
            ]
          }
        ],
        "tags": [
          "SessionBattleSpiritAction"
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "Action": {
        "type": "object",
        "description": "A reference to a Spirit's Action",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of a Spirit's Action",
            "minLength": 1
          }
        }
      },
      "Battle": {
        "type": "object",
        "description": "A skirmish amongst Spirit's",
        "required": [
          "name",
          "spirits"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "The unique name of this Battle",
            "minLength": 1
          },
          "teams": {
            "type": "array",
            "description": "The Team's involved in this Battle.",
            "minLength": 2,
            "maxLength": 2,
            "items": {
              "type": "string",
              "description": "A name of a Team object involved in this Battle"
            }
          }
        }
      },
      "Session": {
        "type": "object",
        "description": "An isolated collection of Battle's and Team's",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "The unique name of this Session",
            "minLength": 1
          },
          "auth": {
            "type": "object",
            "description": "A description of the auth requirements for this Session; defaults to using the well-known OIDC provider",
            "default": {
              "oidc": {
                "issuer": "https://oh-great-spirits.herokuapp.com"
              }
            },
            "properties": {
              "oidc": {
                "type": "object",
                "description": "OIDC authentication configuration",
                "properties": {
                  "issuer": {
                    "type": "string",
                    "description": "OIDC issuer to use for authentication",
                    "default": "https://oh-great-spirits.herokuapp.com",
                    "minLength": 1,
                    "pattern": "^https://.*"
                  }
                }
              }
            }
          }
        }
      },
      "Spirit": {
        "type": "object",
        "description": "An actor in a Battle",
        "required": [
          "name",
          "stats"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "The unique name of this Spirit",
            "minLength": 1
          },
          "stats": {
            "type": "object",
            "description": "Quantitative properties of the Spirit; these are utilized and manipulated throughout the course of a Battle",
            "required": [
              "health"
            ],
            "properties": {
              "health": {
                "type": "integer",
                "description": "A quantitative representation of the energy of the Spirit; when this drops to 0, the Spirit is no longer to participate in a Battle",
                "format": "int64",
                "minimum": 1
              },
              "power": {
                "type": "integer",
                "description": "A quantitative representation of the might of the Spirit",
                "format": "int64",
                "minimum": 0,
                "default": 0
              },
              "armor": {
                "type": "integer",
                "description": "A quantitative representation of the defense of the Spirit",
                "format": "int64",
                "minimum": 0,
                "default": 0
              },
              "agility": {
                "type": "integer",
                "description": "A quantitative representation of the speed of the Spirit",
                "format": "int64",
                "minimum": 0,
                "default": 0
              }
            }
          },
          "actions": {
            "type": "array",
            "description": "The Action's that this Spirit can perform",
            "default": [
              "attack"
            ],
            "items": {
              "type": "string",
              "description": "The name of an Action"
            }
          },
          "intelligence": {
            "type": "string",
            "description": "The AI setting for this Spirit",
            "default": "roundRobin"
          }
        }
      },
      "Team": {
        "type": "object",
        "description": "A collection Spirit's",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "The unique name of this Team",
            "minLength": 1
          }
        }
      }
    },
    "securitySchemes": {
      "oidc": {
        "type": "openIdConnect",
        "openIdConnectUrl": "https://oh-great-spirits.herokuapp.com"
      }
    }
  }
}
